doctype html
html
  head
    title Stack Merge
    link(rel="shortcut icon", type="image/png", href="/assets/media/favicon.png")
    link(rel="stylesheet", href="assets/css/main.css")
  body
    header
      button.choose
        | + Add images
        input.choose(type="file", multiple)

      h1 Stack Merge

      button.save
        <i class="icon"></i>
        | Save image

    .image-stack.pane.drop-target
      p.hint You can drag and drop images here to load them.

      .drop-overlay
        p.drop-hint Drop<br>images<br>here

      ol.image-stack

    .preview.pane
      .working-overlay.dialog
        p Working&hellip;
        progress(min="0", max="100", value="0")
        button.cancel Cancel

      .controls
        button.refresh Refresh

      .preview-scroller
        canvas.preview

    script#template-stack-item(type='text/mustache').
      {{# images }}
      <li id="thumb-{{id}}" {{#visible}}class="using"{{/visible}}>
        <input type="checkbox" data-id="{{ id }}" {{# visible }}checked{{/ visible }} class="toggle">
        <button class="remove" data-id="{{ id }}">Remove</button>
        <figure {{^canvas}}class="loading"{{/canvas}}>
          {{# image }}
          <img src="{{ image.src }}">
          {{/ image }}
          <figcaption class="thumbnail-name">{{ name }}</figcaption>
        </figure>
      </li>
      {{/ images }}

    footer
      p
        | By 
        a(href="http://andyf.me") Andy Farrell
        |  &middot; source available 
        a(href="https://github.com/caerphoto/stackmerge") on GitHub
        |  &middot; inspired by 
        a(href="https://luminous-landscape.com/making-people-and-other-things-go-away/") this Luminous Landscape article

    if (process.env.NODE_ENV === 'production')
      script(data-main="main", src="/assets/javascript/main.built.js")
    else
      script(data-main="main", src="assets/javascript/lib/require.js")
      script.
        require.config({
          baseUrl: '/assets/javascript',
          paths: {
            backbone: 'lib/backbone-min',
            underscore: 'lib/underscore-min',
            jquery: 'lib/jquery-2.1.4.min',
            mustache: 'lib/mustache.min'
          }
        });
